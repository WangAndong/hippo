function nickData(X,pos,file,W)

inds = [.94 1.036]*100000;
elecs = [1 15 58];
pad = 1000;

[~,pos,~,y] = fixPos(pos);

ratio = round(size(X,2)/numel(pos));

X = X(:,4*(inds(1)-pad)+1:4*(inds(2)+pad));
pos = pos(inds(1)-pad+1:inds(2)+pad);
y = y(inds(1)-pad+1:inds(2)+pad);
pos = resample(pos,ratio,1);
y = round(resample(y,ratio,1));
Xf = morFilter(X,8,1250/8);
[~,~,v] = svds(Xf,1);
Xfd = bsxfun(@times,Xf,exp(1i*-angle(v')));
%[Xz,Z] = zca2(Xf);
%Xzd = Z*Xfd;
%X=  [X;Xf;Xfd;Xz;Xzd;pos'];

X = bsxfun(@rdivide,X,std(X,0,2));
X = [X;y];
X = real(X);
X = X(:,pad*4+1:end-pad*4);
X(end,:) = X(end,:)-min(X(end,:));

csvwrite(file,X);