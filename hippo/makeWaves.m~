function m = makeWaves(dims)

factor = 10;
parallel = 0;
linear = 0;
res = 10;
seed = 2*pi*rand(2,1);
envelope = rand(dims(3),2);envelope = filtfilt(gausswin(10),sum(gausswin(10)),envelope);
grid = repmat(linspace(0,2*pi,dims(1)),[dims(2) 1]);

if linear
    sFactor = factor;
else
    sFactor = 1;
end

if parallel
    grid1 = repmat(linspace(0,2*pi,dims(1))*sFactor,[dims(2) 1]);
else
    grid1 = repmat(linspace(0,2*pi,dims(1))'*sFactor,[1 dims(2)]);
end

m = zeros([size(grid) dims(3)]);
for i = 1:dims(3)
    m(:,:,i) = envelope(i,1)*exp(1i*(grid + i/res + seed(1))+envelope(i,2)*sin(grid1+factor*i/res+seed(2));
end