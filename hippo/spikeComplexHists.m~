function [times cellNum currPhase] = spikeComplexHists(fname,path)

tic;
chunkSize = 5000;
info = hdf5info([path 'hippo.h5']);
nSamples = info.GroupHierarchy.Datasets(1).Dims
[times cellNum] = LoadCluRes(fname);
times = 
currPhase = [];
for i = 1:ceil(nSamples(2)/chunkSize)
    startInd = chunkSize*(i-1);
    numLen = min(nSamples(2) - startInd -1,chunkSize);
    chunk = complex(double(h5varget([path 'hippo.h5'],'/hReal',[0 startInd],[nSamples(1) numLen])),...
            double(h5varget([path 'hippo.h5'],'/hImag',[0 startInd],[nSamples(1) numLen])));
    chunkMean = mean(chunk);
    theseTimes = times - startInd;
    theseTimes = theseTimes(theseTimes > 0 & theseTimes <= numLen);
    currPhase = [currPhase; chunk(theseTimes)];
    if mod(i,100) == 0
        i
    end
end
size(currPhase)
toc

for i = 1:max(cellNum)
    temp = currPhase(cellNum == i);
    
end