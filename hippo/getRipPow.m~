function allS = getRipPow(file,elecs,v)

d = ['/media/work/hippocampus/' file '/'];%['/media/Expansion Drive/KenjiMizuseki/'];%
params.Fs = 1250;
win = [32/1250 32/1250];
params.tapers = [1/win(1) win(1) 1];%params.fpass = [500 3000];
params1.Fs = 1250/32;params1.tapers = [3 5];
allS = zeros(numel(shanks)*8,size(v,1));counter = 0;
for i = shanks
    X = double(h5varget([data_root fname],'/hReal',[0 rind],[nSamples(1) sz]));
     if size(timeCourse,2) > size(v,1)*32*16
         timeCourse = timeCourse(:,1:size(v,1)*32*16);
     end
     [S,~,f] = mtspecgramc(timeCourse',win,params);
     clear timeCourse;
     S = squeeze(mean(S,2));
     Sf = morFilter(S',8,1250/32);
     if size(Sf,2) < size(v,1)
         Sf(:,size(Sf,2)+1:size(v,1)) = 0;
     end
     allS((counter+1):(counter+size(spk,1)),:) = Sf;
     clear Sf S;counter = counter + size(spk,1);
end